<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE service-builder PUBLIC "-//Liferay//DTD Service Builder 6.2.0//EN" "http://www.liferay.com/dtd/liferay-service-builder_6_2_0.dtd">
<service-builder
	package-path="at.graz.meduni.liferay.portlet.bibbox.service">
	<author>reihsr</author>
	<namespace>bibboxcs</namespace>

	<entity name="Invitation" local-service="true" remote-service="true" table="bibboxcs.invitation">
		<column name="invitationId" primary="true" type="long"></column>
		<column name="name" type="String"></column>
		<column name="subject" type="String"></column>
		<column name="body" type="String"></column>
		<column name="status" type="long"></column>
		<column name="invitationsend" type="Date"></column>
		<column name="lastchanged" type="Date"></column>
		<column name="lastchanger" type="long"></column>
		<column name="filter" type="String"></column>
		<column name="invitationOrganisationId" type="Collection" entity="InvitationOrganisation" ></column>
        <order by="desc">
            <order-column name="lastchanged"></order-column>
        </order>
        <finder return-type="Collection" name="Status">
			<finder-column name="status"></finder-column>
		</finder>
		<finder name="Filter" return-type="Collection" >
			<finder-column name="filter" />
		</finder>
		<finder return-type="Invitation" name="Invitation">
			<finder-column name="invitationId"></finder-column>
		</finder>
	</entity>
	
	<entity name="InvitationOrganisation" local-service="true" remote-service="true" table="bibboxcs.invitation_organisation">
		<column name="invitationOrganisationId" primary="true" type="long"></column>
		<column name="invitationId" type="long"></column>
		<column name="organisationId" type="long"></column>
		<column name="userId" type="long"></column>
		<column name="lastchanged" type="Date"></column>
		<column name="lastchanger" type="long"></column>
		<column name="reactdate" type="Date"></column>
		<column name="lastusedlink" type="Date"></column>
		<column name="rejectdate" type="Date"></column>
		<column name="securitylinktoken" type="long"></column>
		<column name="securitytoken" type="long"></column>
		<column name="status" type="long"></column>
		<column name="statusdate" type="Date"></column>
		<finder return-type="Collection" name="Organisation">
			<finder-column name="organisationId"></finder-column>
		</finder>
		<finder return-type="Collection" name="InvitationOrganisations">
			<finder-column name="invitationId"></finder-column>
		</finder>
		<finder return-type="InvitationOrganisation" name="InvitationIdAndOrganisationId">
			<finder-column name="invitationId"></finder-column>
			<finder-column name="organisationId"></finder-column>
		</finder>
		<finder return-type="Collection" name="Status">
			<finder-column name="status"></finder-column>
		</finder>
	</entity>
	
</service-builder>